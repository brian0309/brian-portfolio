---
---
<header
    class="sticky top-0 z-50 bg-cyber-dark/95 border-b-2 border-cyber-green backdrop-blur-sm shadow-[0_0_15px_rgba(0,255,65,0.3)]">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center">
        <!-- Logo -->
        <a href="/" class="text-2xl font-bit text-cyber-green glitch-text hover:text-cyber-pink transition-colors"
            data-text="<BRIAN/>">
            &lt;BRIAN/&gt;
        </a>

        <!-- Desktop Nav -->
        <nav class="hidden md:flex space-x-8 text-xl">
            <a href="/#about"
                class="text-cyber-cyan hover:text-white hover:underline decoration-wavy decoration-cyber-pink underline-offset-4">/ABOUT</a>
            <a href="/#skills"
                class="text-cyber-cyan hover:text-white hover:underline decoration-wavy decoration-cyber-pink underline-offset-4">/SKILLS</a>
            <a href="/#projects"
                class="text-cyber-cyan hover:text-white hover:underline decoration-wavy decoration-cyber-pink underline-offset-4">/PROJECTS</a>
            <a href="/#contact"
                class="text-cyber-cyan hover:text-white hover:underline decoration-wavy decoration-cyber-pink underline-offset-4">/CONTACT</a>
            <a href="/blog"
                class="text-cyber-cyan hover:text-white hover:underline decoration-wavy decoration-cyber-pink underline-offset-4">/BLOG</a>
        </nav>

        <!-- Mobile Menu Button -->
        <button id="menu-btn"
            class="btn btn-menu md:hidden">
            [MENU]
        </button>
    </div>
</header>

<!-- Mobile Menu Overlay (CRT Pop-up) -->
<div id="mobile-menu"
    class="fixed top-16 inset-x-0 bottom-0 bg-cyber-black z-40 hidden flex-col justify-center items-center space-y-8 border-4 border-cyber-pink">
    <div class="absolute inset-0 bg-grid-pattern opacity-20 pointer-events-none"></div>
    <a href="/#about"
        class="menu-link text-4xl text-cyber-green font-bit hover:text-cyber-pink hover:translate-x-2 transition-transform">ABOUT_ME</a>
    <a href="/#skills"
        class="menu-link text-4xl text-cyber-green font-bit hover:text-cyber-pink hover:translate-x-2 transition-transform">SKILLS</a>
    <a href="/#projects"
        class="menu-link text-4xl text-cyber-green font-bit hover:text-cyber-pink hover:translate-x-2 transition-transform">PROJECTS</a>
    <a href="/#contact"
        class="menu-link text-4xl text-cyber-green font-bit hover:text-cyber-pink hover:translate-x-2 transition-transform">CONTACT</a>
    <a href="/blog"
        class="menu-link text-4xl text-cyber-green font-bit hover:text-cyber-pink hover:translate-x-2 transition-transform">BLOG</a>
    <button id="close-menu"
        class="btn btn-menu-close">[CLOSE_SYSTEM]</button>
</div>

<script is:inline>
(() => {
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMenuBtn = document.getElementById('close-menu');
    const menuLinks = Array.from(document.querySelectorAll('.menu-link'));
    const body = document.body;

    if (!mobileMenu) return;

    const openMenu = () => {
        mobileMenu.classList.remove('hidden');
        mobileMenu.classList.remove('tv-close');
        mobileMenu.classList.add('tv-open');
        mobileMenu.classList.add('flex');
        if (body) body.classList.add('overflow-hidden');
    };

    const closeMenu = () => {
        mobileMenu.classList.remove('tv-open');
        mobileMenu.classList.add('tv-close');
        if (body) body.classList.remove('overflow-hidden');
        setTimeout(() => {
            mobileMenu.classList.add('hidden');
            mobileMenu.classList.remove('flex');
        }, 300);
    };

    const bindOnce = (el, type, handler) => {
        if (!el) return;
        const key = `bound${type}`; // dataset keys must be camelCase without dashes
        if (el.dataset && el.dataset[key] === 'true') return;
        el.addEventListener(type, handler);
        if (el.dataset) el.dataset[key] = 'true';
    };

    bindOnce(menuBtn, 'click', openMenu);
    bindOnce(closeMenuBtn, 'click', closeMenu);
    menuLinks.forEach(link => bindOnce(link, 'click', closeMenu));
    bindOnce(document, 'keydown', (event) => {
        if (event.key === 'Escape') closeMenu();
    });
})();
</script>
